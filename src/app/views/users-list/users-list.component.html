<main class="grid justify-content-center">
  <p-card class="col-11 xl:col-10">
    <div class="flex justify-content-end">
      <a pButton href="/users/add" type="button" label="Novo" class="p-button-success"></a>
    </div>
    <p-table
      [value]="users"
      class="col-10"
      [paginator]="true"
      [rows]="10"
      [showCurrentPageReport]="true"
      currentPageReportTemplate="Mostrando {first} ao {last} de {totalRecords} resultados" [rowsPerPageOptions]="[10,25,50]">
      [globalFilterFields]="['id', 'name','email','phone','status', 'createdAt']"
      [filterLocale]="BR">
      <ng-template pTemplate="header">
        <tr>
          <th>
            Código
          </th>
          <th>
            Nome
          </th>
          <th>
            E-mail
          </th>
          <th>
            Telefone
          </th>
          <th colspan="2">
            Data de cadastro
          </th>
        </tr>
        <tr>
          <th style="width:30px">
            <p-columnFilter type="text" field="id"></p-columnFilter>
          </th>
          <th >
            <p-columnFilter type="text" field="name"></p-columnFilter>
          </th>
          <th>
            <p-columnFilter type="text" field="email"></p-columnFilter>
          </th>
          <th>
            <p-columnFilter type="text" field="phone"></p-columnFilter>
          </th>
          <th colspan="2">
            <p-columnFilter type="date" field="createdAt" >
              <ng-template pTemplate="filter" let-filter="filterCallback">
                 <p-calendar (onSelect)="filter($event)" dateFormat="dd/mm/yy"></p-calendar>
              </ng-template>
         </p-columnFilter>
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-user>
        <tr>
          <td>
            <span class="p-column-title">Código</span>
            {{user.id}}
          </td>
          <td>
            <span class="p-column-title">
              Name
            </span>
            {{user.name}}
          </td>
          <td>
            <span class="p-column-title">E-mail</span>
            {{user.email}}
          </td>
          <td>
            <span class="p-column-title">Phone</span>
            {{user.phone}}
          </td>
          <td>
            <span class="p-column-title">Data</span>
            {{user.createdAt | date: 'dd/MM/yyyy'}}
          </td>
          <td>
            <a pButton href="/users/add/{{user.id}}" icon="pi pi-pencil" class="p-button-text p-button-rounded"></a>
            <button pButton (click)="deleteUser(user.id)" icon="pi pi-trash" class="p-button-danger p-button-text p-button-rounded"></button>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="footer" let-columns>
        <tr>
            <td *ngFor="let col of columns">
            {{col.header}}
            </td>
        </tr>
    </ng-template>
  </p-table>
  </p-card>
</main>
<div [className]="visible ? 'loading flex justify-content-center align-items-center' : 'loading unvisible'">
  <p-progressSpinner></p-progressSpinner>
</div>
<p-confirmDialog [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '50vw'}">
  Content
</p-confirmDialog>
